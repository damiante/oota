# Oracle of the Alpha - MTG Game Manager

A web-based tool for managing Magic: the Gathering games that use the card "Oracle of the Alpha". This application helps you track the Power 9 cards generated by Oracle across all game zones, making paper gameplay manageable even when zones become large.

## What is Oracle of the Alpha?

Oracle of the Alpha is a digital-only Magic card that, when it enters the battlefield, shuffles a copy of each of the Power 9 into its owner's library:
- Black Lotus
- Time Walk
- Timetwister
- Ancestral Recall
- Mox Pearl
- Mox Sapphire
- Mox Jet
- Mox Ruby
- Mox Emerald

Since these cards don't exist physically in paper games, this tool lets you track them digitally while playing with physical cards.

## Features

### Game Zones
- **Library (Deck)** - Face-down cards in the lower right
- **Hand** - Your cards in the center bottom
- **Battlefield** - Cards in play in the center top
- **Graveyard** - Discarded cards on the lower left
- **Exile** - Exiled cards on the upper left

Each single-card zone (Library, Graveyard, Exile) has a quick-view button (eye icon) to see all cards without opening the overflow menu.

### State Persistence
Your game state automatically saves to your browser's local storage. When you refresh the page, all cards remain in their zones and positions. Only the "Restart Game" action clears the saved state and resets to a fresh game.

### Drag and Drop
Move cards between zones by dragging them. On mobile, tap and hold a card, then drag it to the destination zone. The app works seamlessly on both desktop and mobile devices.

### Game Actions
Access common game actions through the overflow menu (three-dot button in the top right):

1. **Restart Game** - Clear all zones and reset to 99 placeholder cards in library
2. **Oracle ETB Effect** - Add one copy of each Power 9 to your library and shuffle
3. **Timetwister** - Move hand and graveyard to library, shuffle, then draw 7 cards
4. **Scry X** - Look at the top X cards and arrange them on top or bottom of your library
5. **Surveil X** - Look at the top X cards and put them on top of your library or in your graveyard
6. **Draw X** - Draw X cards from your library
7. **Exile Graveyard** - Move all cards from graveyard to exile

You can also view zones by clicking the eye icon on Library, Graveyard, or Exile zones.

## How to Use

### Basic Gameplay

1. **Starting a Game**
   - Open the app in your browser
   - If continuing a previous game, your cards will be exactly where you left them
   - For a fresh start, tap the overflow menu and select "Restart Game"
   - Use "Oracle ETB Effect" to add the Power 9 to your library
   - Draw your opening hand using "Draw X"

2. **Moving Cards**
   - Tap or click a card to pick it up
   - Drag it to the destination zone
   - Release to drop it there
   - The card will move from one zone to another
   - All moves are automatically saved

3. **Viewing Zones**
   - Single-card zones (Library, Graveyard, Exile) show only the top card
   - The number on each zone shows how many cards it contains
   - Click the eye icon on any single-card zone for a quick view
   - Cards in view modals can be dragged directly to other zones

4. **Managing Duplicates**
   - When multiple copies of the same card are in a zone, they display with a count badge
   - This keeps the UI clean and manageable

5. **Game State Persistence**
   - Your game state automatically saves after every action
   - Refresh the page anytime - your cards stay in place
   - State persists until you use "Restart Game" or clear browser data

### Advanced Actions

**Scrying**
1. Tap the overflow menu and select "Scry X"
2. Enter the number of cards to scry
3. Drag cards to "Top of library" or "Bottom of library" areas
4. Click "Confirm" to finalize the arrangement

**Surveilling**
1. Same as Scry, but cards can go to the graveyard instead of the bottom of the library
2. Drag cards to "Top of library" or "Graveyard"
3. Click "Confirm" when done

**Timetwister Effect**
1. Select "Timetwister" from the overflow menu
2. All cards from hand and graveyard automatically move to library
3. Library is automatically shuffled
4. 7 cards are automatically drawn to your hand

## Building and Running Locally

### Prerequisites
- A modern web browser (Chrome, Firefox, Safari, or Edge)
- A local web server (for testing)

### Quick Start

1. **Clone or download this repository**
   ```bash
   git clone <repository-url>
   cd oota
   ```

2. **Start a local web server**

   Using Python 3:
   ```bash
   python3 -m http.server 8000
   ```

   Using Node.js:
   ```bash
   npx serve
   ```

   Using PHP:
   ```bash
   php -S localhost:8000
   ```

3. **Open in your browser**
   Navigate to `http://localhost:8000`

### Why a Web Server?

The app loads card images and a YAML configuration file. Most browsers block local file access for security reasons, so you need a web server even for local testing.

## Deployment to GitHub Pages

1. **Create a GitHub repository** and push this code

2. **Enable GitHub Pages**
   - Go to repository Settings
   - Navigate to Pages section
   - Select main/master branch as source
   - Save

3. **Access your app**
   - Your app will be available at `https://yourusername.github.io/repository-name`
   - Share this URL to play from any device

## Customizing the Menu

You can reorder or modify menu items by editing `menu-config.yaml`:

```yaml
- id: unique-id
  label: Display Name
  action: functionName
```

The menu items will appear in the order listed in the YAML file.

## Tips for Paper Play

1. **Use placeholder cards** - When a generated card moves to your hand or battlefield, use the placeholder card image as a reference, or use a physical proxy
2. **Track carefully** - The tool maintains perfect game state, but you need to mirror actions in your physical game
3. **Mobile recommended** - Use your phone or tablet during gameplay for easy access
4. **Bookmark it** - Add the app to your home screen for quick access

## Mobile Usage

The app is optimized for mobile:
- Touch-friendly card sizes
- Responsive layout for all screen sizes
- Works in both portrait and landscape
- No installation required - just open in your mobile browser
- Add to home screen for an app-like experience

## Browser Compatibility

- ✅ iOS Safari
- ✅ Chrome Mobile
- ✅ Firefox Mobile
- ✅ Chrome Desktop
- ✅ Firefox Desktop
- ✅ Safari Desktop
- ✅ Edge

## Troubleshooting

**Cards won't drag on mobile**
- Make sure you're tapping and holding the card
- Try using a firmer, longer press
- Some browsers may require enabling touch events

**Images not loading**
- Make sure you're running a web server (not opening the file directly)
- Check that all files in the `static/` folder are present
- Clear your browser cache and reload

**Game state not persisting**
- Ensure your browser allows localStorage
- Check that you're not in private/incognito mode
- Some browsers block storage on file:// URLs - use a web server

**Menu not appearing**
- Check that `menu-config.yaml` is in the root directory
- The app will use a default menu if the YAML file can't be loaded
- Check browser console for errors

**Cards in wrong order after Scry/Surveil**
- The order is determined by the visual placement in the modal
- Top card in the "Top of library" area becomes the new top card
- Cards not placed anywhere stay in their original positions

## Future Enhancements

Potential features for future versions:
- Undo/redo functionality
- Multiple player support
- Game history tracking
- Additional game actions
- Customizable card sets
- Export/import game state for sharing

## Technical Details

Built with:
- Vanilla JavaScript (ES6+)
- HTML5 & CSS3
- Touch Events API for mobile
- HTML5 Drag and Drop API for desktop
- No external dependencies

For implementation details, see [CLAUDE.md](CLAUDE.md).

## License

This project is open source and available for personal use. Magic: the Gathering and related card names are property of Wizards of the Coast.

## Credits

Card images are from Moxfield and are used for educational/personal use purposes.
